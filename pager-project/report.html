<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>National Report</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    /* ---------------- Sidebar ---------------- */
#sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 250px;
  height: 100vh;
  background-color: #0a2239;
  color: white;
  padding: 20px;
  overflow-y: auto;
  z-index: 1000;
}

#sidebar h4 {
  font-size: 1.2rem;
  font-weight: bold;
  color: #ffffff;
}

/* ---------------- Main Content ---------------- */
#main-content {
  margin-left: 270px;
  padding: 20px;
  background: #f8f9fa;
  min-height: 100vh;
}

.section {
  margin: 0 auto 40px auto;
  max-width: 1200px;
}

.section h3,
.section h4 {
  font-weight: 600;
  color: #0a2239;
}

/* ---------------- Chart Containers ---------------- */
.chart-container {
  width: 100% !important;
  height: 500px !important;
  margin: 0 auto 30px auto;
  border: 1px solid #dee2e6;
  border-radius: 6px;
  background-color: #ffffff;
}

/* ---------------- Export Button ---------------- */
#main-content .btn.btn-primary {
  background-color: transparent !important;
  color: #0a2239 !important;
  border: 1px solid #0a2239 !important;
  font-weight: 500;
  font-size: 0.85rem;
  padding: 6px 12px;
  transition: background-color 0.3s, color 0.3s;
}

#main-content .btn.btn-primary:hover {
  background-color: #e6eef5 !important;
  color: #0a2239 !important;
}

/* ---------------- Responsive ---------------- */
@media (max-width: 768px) {
  #sidebar {
    width: 100%;
    height: auto;
    position: relative;
  }
  #main-content {
    margin-left: 0;
  }
}

@media print {
  #sidebar {
    display: none !important;
  }
  #main-content {
    margin: 0 !important;
    padding: 0 10px !important;
    width: 100% !important;
  }
  .section {
    page-break-after: always;
  }
  .chart-container {
    width: 100% !important;
    height: auto !important;
    aspect-ratio: 16/9;
    page-break-inside: avoid;
  }
}

/* ---------------- Report Toggle ---------------- */
#sidebarReportToggle .btn {
  width: 100%;
  text-align: center;
  color: #ffffff;
  border: 1px solid #ffffff44;
  background-color: transparent;
  font-weight: 500;
  font-size: 0.9rem;
  padding: 8px 12px;
  border-radius: 4px;
  transition: background-color 0.3s, color 0.3s, box-shadow 0.2s;
}

#sidebarReportToggle .btn.active {
  background-color: #ffffff;
  color: #0a2239;
  font-weight: 600;
}

#sidebarReportToggle .btn:not(.active):hover {
  background-color: #173a5e;
  color: #ffffff;
  box-shadow: inset 0 0 4px rgba(255, 255, 255, 0.2);
}
  </head>
  <body class="bg-light">
    <div id="sidebar" class="bg-dark text-white p-3">
      <h4 class="mb-3">U.S. Department of Labor</h4>

      <div id="sidebarReportToggle" class="d-flex flex-column mb-3">
        <button type="button" class="btn active mb-2" data-view="national">
          National Report
        </button>
        <button type="button" class="btn mb-2" data-view="regional">
          Regional Report
        </button>
        <button type="button" class="btn" data-view="state">
          State Report
        </button>
      </div>

      <div class="mt-3">
        Last updated:
        2025-09-15
      </div>
    </div>

    <div id="main-content" class="p-4">
      <div class="d-flex justify-content-end mb-4">
        <button class="btn btn-sm btn-primary" onclick="window.print()">
          Export Report
        </button>
      </div>

      <!-- Metric Sections -->
      <script>
var TIMESERIES = {"First Payment":{"National":[{"Date":"1/31/2020","National":92.7},{"Date":"1/31/2021","National":57.6},{"Date":"1/31/2022","National":55.0333},{"Date":"1/31/2023","National":65.6},{"Date":"1/31/2024","National":72.9333},{"Date":"1/31/2025","National":72.2333},{"Date":"10/31/2020","National":34.0667},{"Date":"10/31/2021","National":36.6667},{"Date":"10/31/2022","National":41.0333},{"Date":"10/31/2023","National":65.0667},{"Date":"10/31/2024","National":55.9667},{"Date":"11/30/2020","National":47.2333},{"Date":"11/30/2021","National":43.2333},{"Date":"11/30/2022","National":50.4667},{"Date":"11/30/2023","National":67.5667},{"Date":"11/30/2024","National":52.7667},{"Date":"12/31/2020","National":45.4333},{"Date":"12/31/2021","National":39.6},{"Date":"12/31/2022","National":57.0333},{"Date":"12/31/2023","National":68.7},{"Date":"12/31/2024","National":61.2333},{"Date":"2/28/2021","National":46},{"Date":"2/28/2022","National":36.6667},{"Date":"2/28/2023","National":52.8},{"Date":"2/28/2025","National":67.2667},{"Date":"2/29/2020","National":90.0333},{"Date":"2/29/2024","National":70.3667},{"Date":"3/31/2020","National":97.7333},{"Date":"3/31/2021","National":38.5333},{"Date":"3/31/2022","National":40.9333},{"Date":"3/31/2023","National":48.4333},{"Date":"3/31/2024","National":44.1333},{"Date":"3/31/2025","National":57.7333},{"Date":"4/30/2020","National":82.5667},{"Date":"4/30/2021","National":64.1},{"Date":"4/30/2022","National":41.3333},{"Date":"4/30/2023","National":56.1},{"Date":"4/30/2024","National":47.9333},{"Date":"4/30/2025","National":56.3667},{"Date":"5/31/2020","National":50.7333},{"Date":"5/31/2021","National":64.9},{"Date":"5/31/2022","National":41.3},{"Date":"5/31/2023","National":61.6},{"Date":"5/31/2024","National":53.6},{"Date":"5/31/2025","National":59.3333},{"Date":"6/30/2020","National":41.6667},{"Date":"6/30/2021","National":69.3667},{"Date":"6/30/2022","National":46.8},{"Date":"6/30/2023","National":70.9},{"Date":"6/30/2024","National":60.0667},{"Date":"6/30/2025","National":66.5333},{"Date":"7/31/2020","National":42.4},{"Date":"7/31/2021","National":46.5333},{"Date":"7/31/2022","National":60.7333},{"Date":"7/31/2023","National":72.6333},{"Date":"7/31/2024","National":62.9},{"Date":"7/31/2025","National":70.0333},{"Date":"8/31/2020","National":39.7333},{"Date":"8/31/2021","National":36.0333},{"Date":"8/31/2022","National":55.4667},{"Date":"8/31/2023","National":64.6667},{"Date":"8/31/2024","National":61.0667},{"Date":"8/31/2025","National":48.3},{"Date":"9/30/2020","National":40.7},{"Date":"9/30/2021","National":39.5667},{"Date":"9/30/2022","National":46.7667},{"Date":"9/30/2023","National":61.0667},{"Date":"9/30/2024","National":53.9333}],"States":{"DC":{"Date":["1/31/2020","2/29/2020","3/31/2020","4/30/2020","5/31/2020","6/30/2020","7/31/2020","8/31/2020","9/30/2020","10/31/2020","11/30/2020","12/31/2020","1/31/2021","2/28/2021","3/31/2021","4/30/2021","5/31/2021","6/30/2021","7/31/2021","8/31/2021","9/30/2021","10/31/2021","11/30/2021","12/31/2021","1/31/2022","2/28/2022","3/31/2022","4/30/2022","5/31/2022","6/30/2022","7/31/2022","8/31/2022","9/30/2022","10/31/2022","11/30/2022","12/31/2022","1/31/2023","2/28/2023","3/31/2023","4/30/2023","5/31/2023","6/30/2023","7/31/2023","8/31/2023","9/30/2023","10/31/2023","11/30/2023","12/31/2023","1/31/2024","2/29/2024","3/31/2024","4/30/2024","5/31/2024","6/30/2024","7/31/2024","8/31/2024","9/30/2024","10/31/2024","11/30/2024","12/31/2024","1/31/2025","2/28/2025","3/31/2025","4/30/2025","5/31/2025","6/30/2025","7/31/2025"],"Value":[92.5,93.3,97.1,62.6,51.4,49.8,47.1,34.9,31.1,36.4,35.2,42.8,41.4,29.2,36.9,62.4,47.3,55.6,52.3,42.1,43.5,61.5,77.8,54.4,64,34.6,62.4,39.9,38.6,31.3,52.3,48.2,39.8,21.7,43.2,49.3,56.5,46.1,32.6,32.9,52,55.9,66.1,61.7,63.4,68.9,65.2,70.1,71.7,81.8,30.6,37.5,53.2,60.5,63.2,63.6,61.4,67.1,50.6,53.3,73,82.2,64.5,57.6,63.3,70.3,78.7]},"DE":{"Date":["1/31/2020","2/29/2020","3/31/2020","4/30/2020","5/31/2020","6/30/2020","7/31/2020","8/31/2020","9/30/2020","10/31/2020","11/30/2020","12/31/2020","1/31/2021","2/28/2021","3/31/2021","4/30/2021","5/31/2021","6/30/2021","7/31/2021","8/31/2021","9/30/2021","10/31/2021","11/30/2021","12/31/2021","1/31/2022","2/28/2022","3/31/2022","4/30/2022","5/31/2022","6/30/2022","7/31/2022","8/31/2022","9/30/2022","10/31/2022","11/30/2022","12/31/2022","1/31/2023","2/28/2023","3/31/2023","4/30/2023","5/31/2023","6/30/2023","7/31/2023","8/31/2023","9/30/2023","10/31/2023","11/30/2023","12/31/2023","1/31/2024","2/29/2024","3/31/2024","4/30/2024","5/31/2024","6/30/2024","7/31/2024","8/31/2024","9/30/2024","10/31/2024","11/30/2024","12/31/2024","1/31/2025","2/28/2025","3/31/2025","4/30/2025","5/31/2025","6/30/2025","7/31/2025","8/31/2025"],"Value":[92.9,88.1,98.7,95.2,71,61.1,56.7,48.9,48.3,37.9,51.8,56,67.1,59.3,48.5,76.3,82.8,81.1,36.2,31.1,31.3,26.1,27.8,36.8,58.4,37.8,27.7,36.2,51.1,53.5,63.7,60,51.4,53.8,64.1,64.3,72.3,60.2,55,63,61.5,78.4,76.9,68.7,57,66.5,74.7,71.9,73.8,65.5,47.7,44.8,48.2,52.6,58.8,55.8,42.7,41.7,45.8,64.1,71,54.9,44.9,43.1,42.3,53.3,60.6,48.3]},"MD":{"Date":["1/31/2020","2/29/2020","3/31/2020","4/30/2020","5/31/2020","6/30/2020","7/31/2020","8/31/2020","9/30/2020","10/31/2020","11/30/2020","12/31/2020","1/31/2021","2/28/2021","3/31/2021","4/30/2021","5/31/2021","6/30/2021","7/31/2021","8/31/2021","9/30/2021","10/31/2021","11/30/2021","12/31/2021","1/31/2022","2/28/2022","3/31/2022","4/30/2022","5/31/2022","6/30/2022","7/31/2022","8/31/2022","9/30/2022","10/31/2022","11/30/2022","12/31/2022","1/31/2023","2/28/2023","3/31/2023","4/30/2023","5/31/2023","6/30/2023","7/31/2023","8/31/2023","9/30/2023","10/31/2023","11/30/2023","12/31/2023","1/31/2024","2/29/2024","3/31/2024","4/30/2024","5/31/2024","6/30/2024","7/31/2024","8/31/2024","9/30/2024","10/31/2024","11/30/2024","12/31/2024","1/31/2025","2/28/2025","3/31/2025","4/30/2025","5/31/2025","6/30/2025","7/31/2025"],"Value":[92.7,88.7,97.4,89.9,29.8,14.1,23.4,35.4,42.7,27.9,54.7,37.5,64.3,49.5,30.2,53.6,64.6,71.4,51.1,34.9,43.9,22.4,24.1,27.6,42.7,37.6,32.7,47.9,34.2,55.6,66.2,58.2,49.1,47.6,44.1,57.5,68,52.1,57.7,72.4,71.3,78.4,74.9,63.6,62.8,59.8,62.8,64.1,73.3,63.8,54.1,61.5,59.4,67.1,66.7,63.8,57.7,59.1,61.9,66.3,72.7,64.7,63.8,68.4,72.4,76,70.8]}},"Regions":{"Region 2 - Philadelphia":{"DC":{"Date":["1/31/2020","2/29/2020","3/31/2020","4/30/2020","5/31/2020","6/30/2020","7/31/2020","8/31/2020","9/30/2020","10/31/2020","11/30/2020","12/31/2020","1/31/2021","2/28/2021","3/31/2021","4/30/2021","5/31/2021","6/30/2021","7/31/2021","8/31/2021","9/30/2021","10/31/2021","11/30/2021","12/31/2021","1/31/2022","2/28/2022","3/31/2022","4/30/2022","5/31/2022","6/30/2022","7/31/2022","8/31/2022","9/30/2022","10/31/2022","11/30/2022","12/31/2022","1/31/2023","2/28/2023","3/31/2023","4/30/2023","5/31/2023","6/30/2023","7/31/2023","8/31/2023","9/30/2023","10/31/2023","11/30/2023","12/31/2023","1/31/2024","2/29/2024","3/31/2024","4/30/2024","5/31/2024","6/30/2024","7/31/2024","8/31/2024","9/30/2024","10/31/2024","11/30/2024","12/31/2024","1/31/2025","2/28/2025","3/31/2025","4/30/2025","5/31/2025","6/30/2025","7/31/2025"],"Value":[92.5,93.3,97.1,62.6,51.4,49.8,47.1,34.9,31.1,36.4,35.2,42.8,41.4,29.2,36.9,62.4,47.3,55.6,52.3,42.1,43.5,61.5,77.8,54.4,64,34.6,62.4,39.9,38.6,31.3,52.3,48.2,39.8,21.7,43.2,49.3,56.5,46.1,32.6,32.9,52,55.9,66.1,61.7,63.4,68.9,65.2,70.1,71.7,81.8,30.6,37.5,53.2,60.5,63.2,63.6,61.4,67.1,50.6,53.3,73,82.2,64.5,57.6,63.3,70.3,78.7]},"DE":{"Date":["1/31/2020","2/29/2020","3/31/2020","4/30/2020","5/31/2020","6/30/2020","7/31/2020","8/31/2020","9/30/2020","10/31/2020","11/30/2020","12/31/2020","1/31/2021","2/28/2021","3/31/2021","4/30/2021","5/31/2021","6/30/2021","7/31/2021","8/31/2021","9/30/2021","10/31/2021","11/30/2021","12/31/2021","1/31/2022","2/28/2022","3/31/2022","4/30/2022","5/31/2022","6/30/2022","7/31/2022","8/31/2022","9/30/2022","10/31/2022","11/30/2022","12/31/2022","1/31/2023","2/28/2023","3/31/2023","4/30/2023","5/31/2023","6/30/2023","7/31/2023","8/31/2023","9/30/2023","10/31/2023","11/30/2023","12/31/2023","1/31/2024","2/29/2024","3/31/2024","4/30/2024","5/31/2024","6/30/2024","7/31/2024","8/31/2024","9/30/2024","10/31/2024","11/30/2024","12/31/2024","1/31/2025","2/28/2025","3/31/2025","4/30/2025","5/31/2025","6/30/2025","7/31/2025","8/31/2025"],"Value":[92.9,88.1,98.7,95.2,71,61.1,56.7,48.9,48.3,37.9,51.8,56,67.1,59.3,48.5,76.3,82.8,81.1,36.2,31.1,31.3,26.1,27.8,36.8,58.4,37.8,27.7,36.2,51.1,53.5,63.7,60,51.4,53.8,64.1,64.3,72.3,60.2,55,63,61.5,78.4,76.9,68.7,57,66.5,74.7,71.9,73.8,65.5,47.7,44.8,48.2,52.6,58.8,55.8,42.7,41.7,45.8,64.1,71,54.9,44.9,43.1,42.3,53.3,60.6,48.3]},"MD":{"Date":["1/31/2020","2/29/2020","3/31/2020","4/30/2020","5/31/2020","6/30/2020","7/31/2020","8/31/2020","9/30/2020","10/31/2020","11/30/2020","12/31/2020","1/31/2021","2/28/2021","3/31/2021","4/30/2021","5/31/2021","6/30/2021","7/31/2021","8/31/2021","9/30/2021","10/31/2021","11/30/2021","12/31/2021","1/31/2022","2/28/2022","3/31/2022","4/30/2022","5/31/2022","6/30/2022","7/31/2022","8/31/2022","9/30/2022","10/31/2022","11/30/2022","12/31/2022","1/31/2023","2/28/2023","3/31/2023","4/30/2023","5/31/2023","6/30/2023","7/31/2023","8/31/2023","9/30/2023","10/31/2023","11/30/2023","12/31/2023","1/31/2024","2/29/2024","3/31/2024","4/30/2024","5/31/2024","6/30/2024","7/31/2024","8/31/2024","9/30/2024","10/31/2024","11/30/2024","12/31/2024","1/31/2025","2/28/2025","3/31/2025","4/30/2025","5/31/2025","6/30/2025","7/31/2025"],"Value":[92.7,88.7,97.4,89.9,29.8,14.1,23.4,35.4,42.7,27.9,54.7,37.5,64.3,49.5,30.2,53.6,64.6,71.4,51.1,34.9,43.9,22.4,24.1,27.6,42.7,37.6,32.7,47.9,34.2,55.6,66.2,58.2,49.1,47.6,44.1,57.5,68,52.1,57.7,72.4,71.3,78.4,74.9,63.6,62.8,59.8,62.8,64.1,73.3,63.8,54.1,61.5,59.4,67.1,66.7,63.8,57.7,59.1,61.9,66.3,72.7,64.7,63.8,68.4,72.4,76,70.8]}}}}};
</script>
  <div class="section metric-section" id="section_first_payment">
    <div class="text-center mb-3">
      <h3>First Payment</h3>
    </div>
    <div id="natl_first_payment" class="chart-container"></div>
    <div class="text-center mb-3">
      <h4>State Time Series (by Region)</h4>
    </div>
    <div id="region_first_payment_region_2_philadelphia" class="chart-container"></div>

  </div>


      <div
        class="section p-3 bg-white shadow-sm rounded"
        id="regionalSection"
        style="display: none"
      >
        <h3 class="text-center">Regional Report</h3>
        <div id="regionalContent">[Regional charts]</div>
      </div>

      <div
        class="section p-3 bg-white shadow-sm rounded"
        id="stateSection"
        style="display: none"
      >
        <h3 class="text-center">State Report</h3>
        <div id="stateContent">[State charts]</div>
      </div>
    </div>

    let charts = {};

// Render national chart
function renderNationalChart(containerId, natl, metric) {
  let chartDom = document.getElementById(containerId);
  if (!chartDom) return;
  if (charts[containerId]) echarts.dispose(chartDom);
  let chart = echarts.init(chartDom);

  let option = {
    title: { text: `${metric} – National Trend`, left: "center" },
    tooltip: { trigger: "axis" },
    xAxis: {
      type: "category",
      data: natl.map((d) => d.Date),
      axisLabel: { rotate: 45 },
    },
    yAxis: { type: "value", min: 0, max: 100 },
    series: [{ type: "line", data: natl.map((d) => d.National), smooth: true }],
  };

  chart.setOption(option);
  charts[containerId] = chart;
}

// Render regional state chart
function renderRegionChart(containerId, states, regionName, metric) {
  let chartDom = document.getElementById(containerId);
  if (!chartDom) return;
  if (charts[containerId]) echarts.dispose(chartDom);
  let chart = echarts.init(chartDom);

  let seriesData = Object.keys(states).map((st) => ({
    name: st,
    type: "line",
    data: states[st].Value,
    smooth: true,
  }));

  let option = {
    title: { text: `${metric} – ${regionName}`, left: "center" },
    tooltip: { trigger: "axis" },
    legend: { type: "scroll", top: 30 },
    xAxis: {
      type: "category",
      data: states[Object.keys(states)[0]].Date,
      axisLabel: { rotate: 45 },
    },
    yAxis: { type: "value", min: 0, max: 100 },
    series: seriesData,
  };

  chart.setOption(option);
  charts[containerId] = chart;
}

// Master renderer
function renderAllMetrics() {
  Object.keys(TIMESERIES).forEach((metric) => {
    let safeId = metric.toLowerCase().replace(/[^a-z0-9]+/g, "_");
    let natl = TIMESERIES[metric].National;
    let regions = TIMESERIES[metric].Regions;

    renderNationalChart(`natl_${safeId}`, natl, metric);

    Object.keys(regions).forEach((regionName) => {
      let regionId = `region_${safeId}_${regionName
        .toLowerCase()
        .replace(/[^a-z0-9]+/g, "_")}`;
      renderRegionChart(regionId, regions[regionName], regionName, metric);
    });
  });
}

// Sidebar toggle
function setupSidebarToggle() {
  const buttons = document.querySelectorAll("#sidebarReportToggle .btn");
  buttons.forEach((btn) => {
    btn.addEventListener("click", function () {
      buttons.forEach((el) => el.classList.remove("active"));
      this.classList.add("active");
      const view = this.getAttribute("data-view");
      document.querySelectorAll(".metric-section").forEach((sec) => {
        sec.style.display = view === "national" ? "block" : "none";
      });
      document.getElementById("regionalSection").style.display =
        view === "regional" ? "block" : "none";
      document.getElementById("stateSection").style.display =
        view === "state" ? "block" : "none";
    });
  });
}

// Init
document.addEventListener("DOMContentLoaded", () => {
  renderAllMetrics();
  setupSidebarToggle();
  window.addEventListener("resize", () => {
    Object.values(charts).forEach((c) => c.resize());
  });
});
  </body>
</html>
